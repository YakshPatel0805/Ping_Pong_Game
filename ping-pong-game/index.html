<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ping Pong Game</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: rgb(162, 210, 223); text-align: center; overflow: hidden; }
        .game-container { position: relative; width: 100vw; height: 100vh; }
        .rod { position: absolute; width: 150px; height: 10px; background: white; }
        .ball { position: absolute; width: 15px; height: 15px; background: rgb(235, 56, 181); border-radius: 50%; }
    </style>
</head>
<body>
    <div class="game-container">
        <div id="rod1" class="rod"></div>
        <div id="rod2" class="rod"></div>
        <div id="ball" class="ball"></div>
    </div>
    <script>
        const rod1 = document.getElementById("rod1");
        const rod2 = document.getElementById("rod2");
        const ball = document.getElementById("ball");
        const gameContainer = document.querySelector(".game-container");
        let rodWidth = rod1.offsetWidth;
        let rodHeight = rod1.offsetHeight;
        let ballDiameter = ball.offsetWidth;
        let ballSpeedX = 2, ballSpeedY = 2;
        let ballX = 50, ballY = 50;
        let rodX = (window.innerWidth - rodWidth) / 2;
        let rodSpeed = 20;
        let gameOn = false;
        let score = 0;
        let highestScore = localStorage.getItem("highestScore") || 0;
        let highestPlayer = localStorage.getItem("highestPlayer") || "No one";

        alert(`Highest Score: ${highestScore} by ${highestPlayer}`);

        function resetGame(loser) {
            alert(`${loser} loses! Score: ${score}`);
            if (score > highestScore) {
                highestScore = score;
                let playerName = prompt("New High Score! Enter your name:") || "Anonymous";
                localStorage.setItem("highestScore", highestScore);
                localStorage.setItem("highestPlayer", playerName);
            }
            score = 0;
            ballX = (window.innerWidth - ballDiameter) / 2;
            ballY = loser === "Rod 1" ? 100 : window.innerHeight - 100;
            rodX = (window.innerWidth - rodWidth) / 2;
            gameOn = false;
        }

        function moveBall() {
            if (!gameOn) return;
            ballX += ballSpeedX;
            ballY += ballSpeedY;

            if (ballX <= 0 || ballX + ballDiameter >= window.innerWidth) {
                ballSpeedX = -ballSpeedX;
            }

            if (ballY <= rodHeight && ballX + ballDiameter >= rodX && ballX <= rodX + rodWidth) {
                ballSpeedY = -ballSpeedY;
                score++;
            } else if (ballY + ballDiameter >= window.innerHeight - rodHeight && ballX + ballDiameter >= rodX && ballX <= rodX + rodWidth) {
                ballSpeedY = -ballSpeedY;
                score++;
            }
            else if (ballY <= 0) {
                resetGame("Rod 1");
            }
            else if (ballY + ballDiameter >= window.innerHeight) {
                resetGame("Rod 2");
            }

            ball.style.left = `${ballX}px`;
            ball.style.top = `${ballY}px`;
            requestAnimationFrame(moveBall);
        }

        document.addEventListener("keydown", (e) => {
            if (e.key === "ArrowLeft" && rodX > 0) {
                rodX -= rodSpeed;
            } else if (e.key === "ArrowRight" && rodX + rodWidth < window.innerWidth) {
                rodX += rodSpeed;
            } else if (e.key === "Enter" && !gameOn) {
                gameOn = true;
                moveBall();
            }
            rod1.style.left = `${rodX}px`;
            rod2.style.left = `${rodX}px`;
        });

        function positionElements() {
            rod1.style.top = "10px";
            rod2.style.bottom = "10px";
            rod1.style.left = `${rodX}px`;
            rod2.style.left = `${rodX}px`;
            ball.style.left = `${ballX}px`;
            ball.style.top = `${ballY}px`;
        }

        positionElements();
    </script>
</body>
</html>
